/*!
 *JQuery Media for Website Realizer
 * 
 * Version: 1.0.0
 * Copyright (c) 2008 Adritech Software Co. Ltd.
 * 
 * Amended from the following:
 *
 * jQuery Media Plugin for converting elements into rich media content.
 *
 * Examples and documentation at: http://malsup.com/jquery/media/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * @author: M. Alsup
 * @version: 0.81 (06/05/2008)
 * @requires jQuery v1.1.2 or later
 * $Id: jquery.media.js 2460 2007-07-23 02:53:15Z malsup $
 *
 * Supported Media Players:
 *    - Flash
 *    - Quicktime
 *    - Real Player
 *    - Silverlight
 *    - Windows Media Player
 *    - iframe
 *
 * Supported Media Formats:
 *   Any types supported by the above players, such as:
 *     Video: asf, avi, flv, mov, mpg, mpeg, mp4, qt, smil, swf, wmv, 3g2, 3gp
 *     Audio: aif, aac, au, gsm, mid, midi, mov, mp3, m4a, snd, rm, wav, wma
 *     Other: bmp, html, pdf, psd, qif, qtif, qti, tif, tiff, xaml
 *
 * Thanks to Mark Hicken and Brent Pedersen for helping me debug this on the Mac!
 * Thanks to Dan Rossi for numerous bug reports and code bits!
 */
(function(c){var j=c.browser.msie&&c.browser.version<9;c.fn.media=function(o,n,p){return this.each(function(){if(typeof o=="function"){p=n;n=o;o={}}var x=h(this,o);if(typeof n=="function"){n(this,x)}var w=l();var q=w.exec(x.src)||[""];x.type?q[0]=x.type:q.shift();for(var v=0;v<q.length;v++){fn=q[v].toLowerCase();if(f(fn[0])){fn="fn"+fn}if(!c.fn.media[fn]){continue}var u=c.fn.media[fn+"_player"];if(!x.params){x.params={}}if(u){var t=u.autoplayAttr=="autostart";x.params[u.autoplayAttr||"autoplay"]=t?(x.autoplay?1:0):x.autoplay?true:false}var s=c.fn.media[fn](this,x);s.css("backgroundColor",x.bgColor).width(x.width);if(typeof p=="function"){p(this,s[0],x,u.name)}break}})};c.fn.media.mapFormat=function(o,n){if(!o||!n||!c.fn.media.defaults.players[n]){return}o=o.toLowerCase();if(f(o[0])){o="fn"+o}c.fn.media[o]=c.fn.media[n];c.fn.media[o+"_player"]=c.fn.media.defaults.players[n]};c.fn.media.defaults={width:400,height:400,autoplay:0,params:{},attrs:{},flashvars:{},flashVersion:"7",expressInstaller:null,flvPlayer:"mediaplayer.swf",mp3Player:"mediaplayer.swf",silverlight:{inplaceInstallPrompt:"true",isWindowless:"true",framerate:"24",version:"0.9",onError:null,onLoad:null,initParams:null,userContext:null}};c.fn.media.defaults.players={flash:{name:"flash",types:"swf",oAttrs:{classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-oleobject",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+c.fn.media.defaults.flashVersion},eAttrs:{type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer"}},jwmediaplayer:{name:"jwmediaplayer",types:"flv,mp3",oAttrs:{classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-oleobject",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+c.fn.media.defaults.flashVersion},eAttrs:{type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer"}},quicktime:{name:"quicktime",types:"aif,aiff,aac,au,bmp,gsm,mov,mid,midi,mpg,mpeg,mp4,m4a,psd,qt,qtif,qif,qti,snd,tif,tiff,wav,3g2,3gp",oAttrs:{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab"},eAttrs:{type:"video/quicktime",pluginspage:"http://www.apple.com/quicktime/download/"}},realplayer:{name:"real",types:"ra,ram,rm,rpm,rv,smi,smil",autoplayAttr:"autostart",oAttrs:{classid:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"},eAttrs:{type:"audio/x-pn-realaudio-plugin",pluginspage:"http://www.real.com/player/"}},winmedia:{name:"winmedia",types:"asf,avi,wma,wmv",autoplayAttr:"autostart",oUrl:"url",oAttrs:{classid:"clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6",type:"application/x-oleobject"},eAttrs:{type:c.browser.mozilla&&m()?"application/x-ms-wmp":"application/x-mplayer2",pluginspage:"http://www.microsoft.com/Windows/MediaPlayer/"}},iframe:{name:"iframe",types:"html,pdf"},silverlight:{name:"silverlight",types:"xaml"}};function m(){var n=navigator.plugins;for(i=0;i<n.length;i++){var o=n[i];if(o.filename=="np-mswmp.dll"){return true}}return false}var e={};e.flash=function(s,n){if(!window.SWFObject&&!window.swfobject){if(n.flashvars){var v=[];for(var t in n.flashvars){v.push(t+"="+n.flashvars[t])}if(!n.params){n.params={}}n.params.flashvars=v.join("&")}return g(s,n,"flash")}var q=s.id?(' id="'+s.id+'"'):"";var w=n.cls?(' class="'+n.cls+'"'):"";var u=c("<div"+q+w+">");if(window.swfobject){c(s).after(u).appendTo(u);if(!s.id){s.id="movie_player_"+a++}swfobject.embedSWF(n.src,s.id,n.width,n.height,n.flashVersion,n.expressInstaller,n.flashvars,n.params,n.attrs)}else{c(s).after(u).remove();var r=new SWFObject(n.src,"movie_player_"+a++,n.width,n.height,n.flashVersion,n.bgColor);if(n.expressInstaller){r.useExpressInstall(n.expressInstaller)}for(var o in n.params){if(o!="bgColor"){r.addParam(o,n.params[o])}}for(var t in n.flashvars){r.addVariable(t,n.flashvars[t])}r.write(u[0])}if(n.caption){c("<div>").appendTo(u).html(n.caption)}return u};e.jwmediaplayer=function(o,p){var q=p.src;var n=/\.mp3\b/i.test(q)?p.mp3Player?p.mp3Player:c.fn.media.defaults.mp3Player:p.flvPlayer?p.flvPlayer:c.fn.media.defaults.flvPlayer;p.src=n;p.src=p.src+"?file="+q;p.flashvars=c.extend({},{file:q},p.flashvars);return c.fn.media.swf(o,p)};e.silverlight=function(t,u){if(!window.Sys||!window.Sys.Silverlight){if(c.fn.media.xaml.warning){return}c.fn.media.xaml.warning=1;alert("You must include the Silverlight.js script.");return}var s={width:u.width,height:u.height,background:u.bgColor,inplaceInstallPrompt:u.silverlight.inplaceInstallPrompt,isWindowless:u.silverlight.isWindowless,framerate:u.silverlight.framerate,version:u.silverlight.version};var q={onError:u.silverlight.onError,onLoad:u.silverlight.onLoad};var r=t.id?(' id="'+t.id+'"'):"";var p=u.id||"AG"+a++;var o=u.cls?(' class="'+u.cls+'"'):"";var n=c("<div"+r+o+">");c(t).after(n).remove();Sys.Silverlight.createObjectEx({source:u.src,initParams:u.silverlight.initParams,userContext:u.silverlight.userContext,id:p,parentElement:n[0],properties:s,events:q});if(u.caption){c("<div>").appendTo(n).html(u.caption)}return n};var a=1;for(var k in c.fn.media.defaults.players){var d=c.fn.media.defaults.players[k].types;c.each(d.split(","),function(n,p){if(f(p[0])){p="fn"+p}c.fn.media[p]=c.fn.media[k]=b(k);c.fn.media[p+"_player"]=c.fn.media.defaults.players[k]})}function l(){var o="";for(var n in c.fn.media.defaults.players){if(o.length){o+=","}o+=c.fn.media.defaults.players[n].types}return new RegExp("\\.("+o.replace(/,/g,"|")+")\\b")}function b(n){if(e[n]){return e[n]}else{return function(p,o){return g(p,o,n)}}}function f(n){return"0123456789".indexOf(n)>-1}function h(q,A){A=A||{};var z=c(q);var y=q.className||"";var x=c.metadata?z.metadata():c.meta?z.data():{};x=x||{};var v=x.width||parseInt(((y.match(/w:(\d+)/)||[])[1]||0));var r=x.height||parseInt(((y.match(/h:(\d+)/)||[])[1]||0));if(v){x.width=v}if(r){x.height=r}if(y){x.cls=y}var u=c.fn.media.defaults;var t=A;var s=x;var o={params:{bgColor:A.bgColor||c.fn.media.defaults.bgColor}};var n=c.extend({},u,t,s);c.each(["attrs","params","flashvars","silverlight"],function(p,w){n[w]=c.extend({},o[w]||{},u[w]||{},t[w]||{},s[w]||{})});if(typeof n.caption=="undefined"){n.caption=z.text()}n.src=n.src||z.attr("href")||z.attr("src")||"unknown";return n}function g(t,n,x){var A=c(t);var s=c.fn.media.defaults.players[x];if(x=="iframe"){var s=c('<iframe width="'+n.width+'" height="'+n.height+'" >');s.attr("src",n.src);s.css("backgroundColor",s.bgColor)}else{if(j){var w=['<object width="'+n.width+'" height="'+n.height+'" '];for(var y in n.attrs){w.push(y+'="'+n.attrs[y]+'" ')}for(var y in s.oAttrs||{}){w.push(y+'="'+s.oAttrs[y]+'" ')}w.push("></object>");var r=['<param name="'+(s.oUrl||"src")+'" value="'+n.src+'">'];for(var y in n.params){r.push('<param name="'+y+'" value="'+n.params[y]+'">')}var s=document.createElement(w.join(""));for(var u=0;u<r.length;u++){s.appendChild(document.createElement(r[u]))}}else{var w=['<embed width="'+n.width+'" height="'+n.height+'" style="display:block"'];if(n.src){w.push(' src="'+n.src+'" ')}for(var y in n.attrs){w.push(y+'="'+n.attrs[y]+'" ')}for(var y in s.eAttrs||{}){w.push(y+'="'+s.eAttrs[y]+'" ')}for(var y in n.params){w.push(y+'="'+n.params[y]+'" ')}w.push("></embed>")}}var q=t.id?(' id="'+t.id+'"'):"";var z=n.cls?(' class="'+n.cls+'"'):"";var v=c("<div"+q+z+">");A.after(v).remove();(j||x=="iframe")?v.append(s):v.html(w.join(""));if(n.caption){c("<div>").appendTo(v).html(n.caption)}return v}})(jQuery);